PADRÃO:
Vermelho: #910910
Verde: #818D14
bege mais escuro (cor de ícones): #E8D1A3
bege claro (cor de fundo e carrossel): #F5F5DC
fundo configuração e quem somos bege claro: #FCF5EA
cor do container delete e denunciar: #DDE3CD /D0C3A5

MODO ESCURO: 
Fundo preto: #2B2B2B
bege mais escuro: #C7B78F( ou #E8D1A3)
bege mais claro: #efebdb
indicador: #F5F5DC



<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Narraverso</title>
    <link rel="stylesheet" href="css/estiloperfilUsu.css">
    <script src="menu.js"defer></script>
</head>
<body>
   <?php
    session_start();
    $usuarioLogado = isset($_SESSION['id']);


    $login = isset($_GET['login']) ? $_GET['login'] : '';

    if (!isset($_GET['login'])) {
        die("Login está vázio!");
    }

    require("tccbdconnecta.php");

    if (!$conn) {
        die("Erro na conexão com o banco de dados: " . mysqli_connect_error());
    }

    $sql = "SELECT id, fotoPerfil, login, seguidores, seguindo, publicacoes, descricao FROM tcc_pessoa WHERE login = '" . mysqli_real_escape_string($conn, $login) . "'";

    $resultado = mysqli_query($conn, $sql);

    if (!$resultado) {
        die("Erro na consulta SQL: " . mysqli_error($conn));
    }

    if (mysqli_num_rows($resultado) > 0) {
        $dados = mysqli_fetch_assoc($resultado);
        $id = $dados['id'];
        $fotoPerfil = !empty($dados['fotoPerfil']) ? $dados['fotoPerfil'] : 'imagens/login-bege.png';
        $login = $dados['login'];
        $seguidores = $dados['seguidores'];
        $seguindo = $dados['seguindo'];
        $publicacoes = $dados['publicacoes'];
        $descricao = $dados['descricao'];
    } else {
        die("Usuário não encontrado.");
    }

    if ($seguidores == 0) $seguidores = 0;
    if ($seguindo == 0) $seguindo = 0;
    if ($publicacoes == 0) $publicacoes = 0;


    $categoria = isset($_GET['categoria']) ? mysqli_real_escape_string($conn, $_GET['categoria']) : '';

    if (empty($categoria)) {
    //verifica qual categoria tem as obras
    $categorias = ['filme', 'serie', 'livro'];

    foreach ($categorias as $cat) {
    $sqlCheck = "SELECT 1 FROM tcc_obra WHERE categoria = '$cat' AND idUsuario = $id LIMIT 1";
    $resultadoCheck = mysqli_query($conn, $sqlCheck);

        if ($resultadoCheck && mysqli_num_rows($resultadoCheck) > 0) {
            header("Location: perfil_usuario.php?login=" . urlencode($login) . "&categoria=$cat");            
            exit;
        }
    }

    //Se nenhuma categoria tiver obras
    $categoria = 'filme'; 
    }

    ?>
    <header>

        <nav class="nav-bar-principal">
            <div class="nav-list-icone-menu">
                <ul>
                    <li class="nav-item">
                        <a href="#" id="menu-toggle" class="nav-link">
                            <img src="imagens/menu-bege.png" alt="menu" />
                        </a>
                    </li>
                </ul>
            </div>

            <div id="menu" class="nav-list-menu">
                <ul>
                    <li class="nav-item"><a href="index.php" class="nav-link-casa"><img src="imagens/casa-bege.png" alt="casa">      Página Inicial</a></li>
                    <li class="nav-item"><a href="quemSomos.php" class="nav-link"><img src="imagens/quem-somos-bege.png" alt="quem-somos">  Quem Somos</a></li>
                    <li class="nav-item"><a href="pesquisa.php" class="nav-link"><img src="imagens/pesquisa-verde.png" alt="pesquisa">  Pesquisar</a></li>
                    <li class="nav-item"><a href="favorito.php" class="nav-link"><img src="imagens/coracao-bege.png" alt="Favoritos">  Favoritos</a></li>
                    <li class="nav-item"><a href="cadObra01.php" class="nav-link"><img src="imagens/mais-bege.png" alt="mais">  Cadastrar novas obras</a></li>
                    <li class="nav-item"><a href="configuracoes.php" class="nav-link"><img src="imagens/configuracoes-bege.png" alt="configuracao">  Configurações</a></li>
                </ul>
            </div>
        </nav>

        <nav class="nav-bar-logo">
        <div class="nav-list-logo">
                <ul>
                    <!-- Ícone 6: text-narraverso -->
                    <li class="nav-item">
                        <a  class="nav-link-text-narraverso">
                            <img src="imagens/text-narraverso.png" alt="text-narraverso"/>
                        </a>
                    </li>
                </ul>
            </div>
            </nav>


            <nav class="nav-bar-sino">
            <div class="nav-list-sino">
                <ul>
                    <!-- Ícone 7: Sino -->
                    <li class="nav-item">
                        <a href="#" class="nav-link-sino">
                            <img src="imagens/sino-bege.png" alt="Sino"/>
                        </a>
                    </li>
                </ul>
            </div>
            </nav>

            <nav class="nav-bar-login">
            <div class="nav-list-login">
                <ul>
                    <!-- Ícone 7: Contato -->
                    <li class="nav-item">
                        <a href="<?= $usuarioLogado ? 'perfil_pessoal.php' : '#' ?>" class="nav-link-login"
                           <?php if (!$usuarioLogado) echo 'onclick="loginShow()"'; ?>>
                           
                            <img src="imagens/usuario-bege.png" alt="Usuario"/>
                        </a>
                    </li>
                </ul>
            </div>
            </nav>


            <!-- parte do login e cadastrar pessoa -->
        <div class="logar-cad">
            <h3 class="texto-logar-cad" style="margin-top: 20px;">Você não possui uma <br> conta conectada!</h3>
        <div class="login-button">
            <button onclick="logar()">Entrar</button>
            <button onclick="cadastrar()">Cadastrar</button>
            <br>
             <a class="aVoltar" href="#" onclick="fecharLogarCad()">Voltar</a>
            </div>
        </div>

        
        <div class="logar">
            <h3 class="texto-logar-cad">Login</h3>
            <div class="google-button">
                <button type="button"><img src="imagens/icon-google.jpeg">Logar com o Google</button>
            </div>
            <form name="login" action="login02.php" method="POST">  

            <h5 class="texto-logar-cad" style="margin-top: 20px;">Email: <br></h5> 
            <input type="text" name="email" id="email" value="" maxlength="150">
            <h5 class="texto-logar-cad">Senha: <br></h5>  
            <div class="senha-container">
                <input type="password" name="senhaUsu" id="senhaUsu" value="" maxlength="50">
                <span class="olho-span" onclick="mostrarSenha()">
                    <img class="olho-mostra" src="imagens/olho-fechado.png" alt="mostrar/esconder senha">
                </span>
            </div>
            <br>
            <a class="aVoltar" href="#" onclick="fecharLogin()">Voltar</a>
            <br>
            <div class="login-button">
            <input type="submit" name="btEnviar" value="Enviar Dados">
            <br>
        </form>
        <!-- Botão separado do form para evitar envio -->
    <button type="button" onclick="esqueciSenha()">Esqueci a senha</button>
    </div>
    </div>

    <div class="esqueciSenha" style="display: none;">
    <h3 class="texto-logar-cad">Recuperar senha</h3>
        <form name="login" action="esqueciSenha02.php" method="POST"> 

            <h5 class="texto-logar-cad" style="margin-top: 20px;">Email: <br></h5> 
            <input type="text" name="email" id="emailSenha" value="" maxlength="150">
            <br>
            <a class="aVoltar" href="#" onclick="voltarLogin()">Voltar</a>
            <br>
            <div class="login-button">
            <input type="submit" name="btEnviar" value="Enviar">
            <br>
        </form>
    </div>
        



                    
    </header>

    <div class="cadastrar-container">

            <div class="perfil-container">
                <div class="perfil-foto">
                    <label class="fotoPerfil" tabindex="0">
                        <span class="fotoPerfil-image">
                            <img id="preview" src="<?php echo empty($fotoPerfil) ? 'imagens/login-bege.png' : $fotoPerfil; ?>" alt="Foto de Perfil">
                        </span>
                        <input type="file" name="fotoPerfil-name" value="<?php echo $fotoPerfil; ?>" accept="image/*" class="fotoPerfil-input" onchange="previewImage(event)" disabled /> 
                    </label>
                    <div id="perfil-seguir" data-usuario-id=<?= $dados['id'] ?>>
                        <button type="button" id="edit-button" class="edit-button">Seguir</button>
                        <button type="button" id="edit-button-two" class="edit-button-two">Seguindo</button>
                    </div>
                    
                </div>
            
                <div class="nav-list-informacoes">
                    <div class="nav-list-usuario">
                        <label class="login-usuario"><?php echo $login; ?></label>
                    </div>

                    <div class="nav-list-dados">
                        <label class="numero-seguidores">Seguidores:<br><span class="seguidores" id="seguidores"> <?php echo $seguidores; ?></span></label>
                        <label class="numero-seguindo">Seguindo: <br><?php echo $seguindo; ?></label>
                        <label class="numero-publicacao">Publicações: <br><?php echo $publicacoes; ?></label>
                    </div>

                    <div class="nav-list-descricao">
                        <label class="texto-descricao"><?php echo $descricao; ?></label>
                    </div>
                <div class="icone-container">
                        <?php
                            function getIcon($cat, $categoriaAtual) {
                                $cor = $cat === $categoriaAtual ? 'verde' : 'vermelho';
                                return "imagens/{$cat}-{$cor}.png";
                        }
                        ?>
                        <a href="?login=<?= urlencode($login) ?>&categoria=filme" class="icone-filme"><img src="<?php echo getIcon('filme', $categoria);?>" alt="filme"></a>
                        <a href="?login=<?= urlencode($login) ?>&categoria=serie" class="icone-serie"><img src="<?php echo getIcon('serie', $categoria);?>" alt="serie"></a>
                        <a href="?login=<?= urlencode($login) ?>&categoria=livro" class="icone-livro"><img src="<?php echo getIcon('livro', $categoria);?>" alt="livro"></a>
                </div>
            </div>
        </div>

                    <!--Mostrar as obras-->
                    <div class="container-principal-perfil" id="container-principal-perfil">
                        <ul class="obras-perfil" id="obras-perfil">
                            <?php

                                $sql2 = "SELECT nome, fotoPerfil, categoria, genero FROM tcc_obra WHERE categoria = '$categoria' AND idUsuario = $id";

                                $resultado2 = mysqli_query($conn, $sql2);

                                if (!$resultado2) {
                                    die("Erro ao fazer a consulta SQL: " .mysqli_connect_error($conn));
                                }

                                if (mysqli_num_rows($resultado2) > 0) { //quatas linhas retornou da nossa pesquisa
                                    while ($dados = mysqli_fetch_assoc($resultado2)){ //mostra resultado da pesquisa 
                                        $fotoObra = !empty($dados['fotoPerfil']) ? $dados['fotoPerfil'] : 'imagens/imagem-obras.png';
                                        $nome = $dados['nome'];
                                        $categoria = $dados['categoria'];
                                        $genero = $dados['genero'];

                                        echo '<li class="obras" data-tipo="' . $categoria .'"  data-genero="' . $genero . '">
                                        <div class="obras-image">
                                            <img id="preview-obra" src="' . $fotoObra . '" alt="Imagem da obra">
                                        </div>
                                        <div class="conteudo-obras">
                                            <h2 class="conteudo-nome">
                                                '. $nome .'
                                            </h2>
                                        </div>
                                    </li>';
                                    } //enquanto houver resultado aparece
                                } else {
                                    echo '<li id="sem_resultado">
                                        <p>Nenhuma obra encontrada!</p>
                                    </li>';
                                }
                            ?>
                        </ul>    
                    
            </div>

        </div>

        <div id="trilho"></div> <!--Para funcionar modo escuro-->
   
</body>
</html>
